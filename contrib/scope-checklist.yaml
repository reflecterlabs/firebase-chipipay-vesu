# Scope and hotspot checklist for trunk-based development
# Use this to keep branches small and predictable.

hotspots:
  - .env.example
  - package.json
  - package-lock.json
  - tailwind.config.js
  - lib/config/featureFlags.ts (or equivalent)
  - shared config (auth/network)

branch_rules:
  - "Keep branches short-lived (<3 days) and rebase daily on trunk."
  - "Aim for small PRs: <10 files or <500 LOC; if larger, split."
  - "Prefer additive changes; avoid rewrites when possible."
  - "If touching hotspots, announce in PR description and keep changes minimal/additive."

env_file_rules:
  - "Add-only changes to .env.example; avoid renames/deletes."
  - "Keep variables sorted alphabetically; use dummy values (never secrets)."
  - "List new env vars in the PR notes with a short purpose."

feature_flags_rules:
  - "Add flags with default=false unless the feature is core."
  - "Do not rename flags; remove them in a cleanup PR when stable."
  - "Develop behind the flag; activate after validation; then remove flag and dead code."

pre_pr_checks:
  - "git diff trunk --stat"        # check scope size
  - "git diff trunk --name-only"   # inspect files touched
  - "If hotspots are touched, call them out explicitly in the PR."
  - "Rebase onto latest trunk before opening the PR."

deconflict_tips:
  - "Env conflicts: keep both additions, re-sort, update PR notes."
  - "Lockfile or dep bumps: do them in dedicated chore PRs, not mixed with features."
  - "Design tokens: add minimally; batch style changes in focused PRs."

pr_template_snippet: |
  ## Resumen
  - ...

  ## Cambios en config/env/flags
  - .env.example: agrega API_FOO_BASE_URL (dummy)
  - featureFlags: agrega FLAG_LENDING_V2 (default false)

  ## Rollout / flags
  - FLAG_LENDING_V2=false (activar cuando estÃ© listo)

  ## Tests
  - npm test / lint / dev smoke
